{
  "version": "1.0.0",
  "locale": "sl-SI",

  "product": "ACE Real Estate Intake (MVP)",
  "description": "Univerzalni sprejemni tok za slovenske nepremiƒçninske agencije. Linearna vpra≈°anja: kontakt, namen (3 mo≈ænosti), tip, lokacija, proraƒçun, ƒças, financiranje, zgodovina in opombe. Cilj: hiter kvalifikacijski povzetek ter predlog ogleda/klica.",

  "system_prompt": "Ti si prijazen, konkreten AI asistent nepremiƒçninske agencije. Zberi: kontakt, namen (3 opcije), tip nepremiƒçnine, lokacija, proraƒçun, ƒçasovna preferenca, financiranje, pretekla obravnava/ogledi in opombe. Uporabljaj gumbe (choices), brez odprtih vpra≈°anj razen 'opombe'. Odgovarjaj v sloven≈°ƒçini.",
  "start": "welcome",

  "assets": {
    "gallery": [],
    "floorplan": "",
    "map_address": ""
  },

  "validations": {
    "email_regex": "^\\S+@\\S+\\.\\S+$",
    "phone_hint": "+386 ..."
  },

  "nodes": [
    {
      "id": "welcome",
      "texts": [
        "Pozdravljeni üëã Za zaƒçetek prosim vnesite kontakt (zadostuje e-po≈°ta ali telefon)."
      ],
      "openInput": true,
      "inputType": "dual-contact",
      "action": "store_contact",
      "next": "intent"
    },

    {
      "id": "intent",
      "texts": [
        "Kaj je va≈° glavni namen?"
      ],
      "choices": [
        { "title": "üè† Kupujem", "next": "property_type", "action": "qualify_tag", "payload": { "intent": "buy" } },
        { "title": "üîë Najemam", "next": "property_type", "action": "qualify_tag", "payload": { "intent": "rent" } },
        { "title": "üíº Prodajam", "next": "property_type", "action": "qualify_tag", "payload": { "intent": "sell" } }
      ]
    },

    {
      "id": "property_type",
      "texts": [
        "Katera vrsta nepremiƒçnine?"
      ],
      "choices": [
        { "title": "Stanovanje", "next": "location", "action": "qualify_tag", "payload": { "type": "apartment" } },
        { "title": "Hi≈°a", "next": "location", "action": "qualify_tag", "payload": { "type": "house" } },
        { "title": "Poslovni prostor", "next": "location", "action": "qualify_tag", "payload": { "type": "commercial" } }
      ]
    },

    {
      "id": "location",
      "texts": [
        "Lokacija (okvirno)?"
      ],
      "choices": [
        { "title": "Ljubljana in okolica", "next": "budget", "action": "qualify_tag", "payload": { "loc": "ljubljana" } },
        { "title": "Primorska / Obala", "next": "budget", "action": "qualify_tag", "payload": { "loc": "coast" } },
        { "title": "Drugo (SLO)", "next": "budget", "action": "qualify_tag", "payload": { "loc": "other" } }
      ]
    },

    {
      "id": "budget",
      "texts": [
        "Proraƒçun (okvirno)?"
      ],
      "choices": [
        { "title": "Do 200k ‚Ç¨", "next": "timing", "action": "qualify_tag", "payload": { "budget": "lt200" } },
        { "title": "200k ‚Äì 400k ‚Ç¨", "next": "timing", "action": "qualify_tag", "payload": { "budget": "200-400" } },
        { "title": "400k+ ‚Ç¨", "next": "timing", "action": "qualify_tag", "payload": { "budget": "gt400" } }
      ]
    },

    {
      "id": "timing",
      "texts": [
        "Kdaj ≈æelite urediti ogled/posel?"
      ],
      "choices": [
        { "title": "Zelo kmalu (1‚Äì2 tedna)", "next": "financing", "action": "qualify_tag", "payload": { "timing": "p1" } },
        { "title": "V naslednjem mesecu", "next": "financing", "action": "qualify_tag", "payload": { "timing": "p2" } },
        { "title": "Kasneje / fleksibilno", "next": "financing", "action": "qualify_tag", "payload": { "timing": "p3" } }
      ]
    },

    {
      "id": "financing",
      "texts": [
        "Naƒçin financiranja?"
      ],
      "choices": [
        { "title": "Gotovina", "next": "history", "action": "qualify_tag", "payload": { "finance": "cash" } },
        { "title": "Hipoteka / kredit", "next": "history", "action": "qualify_tag", "payload": { "finance": "mortgage" } },
        { "title": "Ne vem / se dogovarjam", "next": "history", "action": "qualify_tag", "payload": { "finance": "unknown" } }
      ]
    },

    {
      "id": "history",
      "texts": [
        "Ste ≈æe bili na ogledu ali sodelovali z agentom?"
      ],
      "choices": [
        { "title": "Da, pri vas", "next": "notes", "action": "qualify_tag", "payload": { "history": "ours" } },
        { "title": "Da, drugje", "next": "notes", "action": "qualify_tag", "payload": { "history": "other" } },
        { "title": "Ne", "next": "notes", "action": "qualify_tag", "payload": { "history": "none" } }
      ]
    },

    {
      "id": "notes",
      "texts": [
        "Dodatne ≈æelje (lega, parkiri≈°ƒçe, nadstropje, vrt ipd.)? (neobvezno)"
      ],
      "openInput": true,
      "inputType": "single",
      "action": "qualify_tag",
      "next": "summary"
    },

    {
      "id": "summary",
      "texts": [
        "Hvala! Pripravljam kratek povzetek in predlog naslednjega koraka."
      ],
      "action": "compute_fit",
      "choices": [
        { "title": "Po≈°ljite predloge ogledov", "next": "end_viewing", "action": "qualify_tag", "payload": { "cta": "viewing" } },
        { "title": "Raje najprej pokliƒçite", "next": "end_call", "action": "qualify_tag", "payload": { "cta": "call" } },
        { "title": "Po≈°ljite info na kontakt", "next": "end_info", "action": "qualify_tag", "payload": { "cta": "info" } }
      ]
    },

    {
      "id": "end_viewing",
      "texts": [
        "Odliƒçno ‚úÖ. Na va≈° kontakt bomo poslali 1‚Äì3 termine za ogled ustreznih nepremiƒçnin."
      ],
      "action": "schedule_placeholder",
      "terminal": true
    },
    {
      "id": "end_call",
      "texts": [
        "V redu. Kratek klic za uskladitev ‚Äì oglasimo se na va≈° kontakt. Hvala!"
      ],
      "terminal": true
    },
    {
      "id": "end_info",
      "texts": [
        "Ni problema. Po≈°ljemo povzetek in predloge na va≈° kontakt. Hvala!"
      ],
      "terminal": true
    }
  ]
}
